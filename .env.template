# ==========================
# Database settings
# ==========================
POSTGRES_DB=rtsp_hub
POSTGRES_USER=user
POSTGRES_PASSWORD=password

# Database URL template - uses variables for flexibility
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# ==========================
# MinIO connection settings
# ==========================
# Enable MinIO storage for videos (true/false)
MINIO_ENABLED=false
# Endpoint format: host:port
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=YOUR_ACCESS_KEY
MINIO_SECRET_KEY=YOUR_SECRET_KEY
# Set to true if your MinIO endpoint uses HTTPS
MINIO_SECURE=false
# MinIO bucket name for storing videos
MINIO_BUCKET_NAME=rtsp-hub-videos

# ==========================
# API settings
# ==========================
API_PREFIX=/api
PROJECT_NAME=""
API_TOKEN=

# ==========================
# Logging settings
# ==========================
# Service name used for logger identification and log file naming
SERVICE_NAME=
# Directory where log files will be stored
LOG_DIR=logs
# Whether to output logs to stdout (true/false)
LOG_TO_STDOUT=true
# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO
# Maximum number of days to keep log files (0 = keep forever)
LOG_MAX_DAYS=3

# ==========================
# Video processing settings
# ==========================
# Directory where recorded videos are stored (shared with MediaMTX)
VIDEO_RECORD_PATH=/app/assets/record
# Directory where processed videos are stored
VIDEO_PROCESSED_PATH=/app/assets/processed_videos

# ==========================
# Media Service (MediaMTX) settings
# ==========================
# Media server hostname (service name in Docker)
MEDIA_SERVER_HOST=media-service
# Media server port (default RTSP port)
MEDIA_SERVER_PORT=8554
# Transport protocol for RTSP (tcp or udp)
RTSP_TRANSPORT=tcp
# Username for MediaMTX internal authentication
MEDIA_USERNAME=admin
# Password for MediaMTX internal authentication
MEDIA_PASSWORD=admin123

# ==========================
# Stream settings
# ==========================
RESTART_BACKOFF_SECONDS=10

# ==========================
# Recording settings
# ==========================
# (used to populate MediaMTX MTX_PATHDEFAULTS_*)
RECORD_ENABLED=yes
RECORD_PATH=${VIDEO_RECORD_PATH}/%path/%Y-%m-%d_%H-%M-%S
RECORD_FORMAT=fmp4
RECORD_PART_DURATION=1s
RECORD_MAX_PART_SIZE=50M
RECORD_SEGMENT_DURATION=2m
RECORD_DELETE_AFTER=10m

# ==========================
# Container user mapping
# ==========================
# Set these to your host user's UID and GID to avoid permission issues
# when bind-mounting local folders (like ./logs) into the container.
# On Linux/macOS you can use: id -u and id -g
APP_UID=1000
APP_GID=1000
